(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{618:function(t,e,s){"use strict";s.r(e);var a={props:["user","form"],data:function(){return{}}},o=s(0),r=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",[t._v("Billing Address")]),t._v(" "),s("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[t.user?s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"Full name",required:""},model:{value:t.user.billing.name,callback:function(e){t.$set(t.user.billing,"name",e)},expression:"user.billing.name"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"Email",required:""},model:{value:t.user.billing.email,callback:function(e){t.$set(t.user.billing,"email",e)},expression:"user.billing.email"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"Address",required:""},model:{value:t.user.billing.street_address,callback:function(e){t.$set(t.user.billing,"street_address",e)},expression:"user.billing.street_address"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"City/Town",required:""},model:{value:t.user.billing.town,callback:function(e){t.$set(t.user.billing,"town",e)},expression:"user.billing.town"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"Country",required:""},model:{value:t.user.billing.country,callback:function(e){t.$set(t.user.billing,"country",e)},expression:"user.billing.country"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"County",required:""},model:{value:t.user.billing.county,callback:function(e){t.$set(t.user.billing,"county",e)},expression:"user.billing.county"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"Phone",required:""},model:{value:t.user.billing.phone,callback:function(e){t.$set(t.user.billing,"phone",e)},expression:"user.billing.phone"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"Zip/Postcode",required:""},model:{value:t.user.billing.postal_code,callback:function(e){t.$set(t.user.billing,"postal_code",e)},expression:"user.billing.postal_code"}})],1),t._v(" "),s("v-btn",{attrs:{text:"",color:"primary"}},[t._v("Save address")])],1):s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"Full name",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"Email",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"Address",required:""},model:{value:t.form.street_address,callback:function(e){t.$set(t.form,"street_address",e)},expression:"form.street_address"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"City/Town",required:""},model:{value:t.form.town,callback:function(e){t.$set(t.form,"town",e)},expression:"form.town"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"Country",required:""},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"County",required:""},model:{value:t.form.county,callback:function(e){t.$set(t.form,"county",e)},expression:"form.county"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"Phone",required:""},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{color:"blue darken-2",label:"Zip/Postcode",required:""},model:{value:t.form.postal_code,callback:function(e){t.$set(t.form,"postal_code",e)},expression:"form.postal_code"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,n={props:["user","account"]},l=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",[t._v("Select Payment Method")]),t._v(" "),s("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[s("v-layout",{attrs:{wrap:""}},[s("v-radio-group",{model:{value:t.account.payment,callback:function(e){t.$set(t.account,"payment",e)},expression:"account.payment"}},[s("v-radio",{attrs:{label:"Cash On Delivery",value:"Cash On Delivery"}}),t._v(" "),s("v-radio",{attrs:{label:"Paypal",value:"Paypal"}}),t._v(" "),s("v-radio",{attrs:{label:"M-pesa",value:"M-pesa"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,i={name:"cart_home",props:["account"],data:function(){return{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),loader:!1,totalCoupon:0,totalPrice:0,discount:0,finalAmount:0,coupon:{c_value:""},couponSessin:[],CartProduct:[],err_ms:"",form:{total:null}}},methods:{getCart:function(){var t=this;axios.get("/getCart").then((function(e){eventBus.$emit("StoprogEvent"),t.carts=e.data,t.loader=!1,eventBus.$emit("cartEvent",e.data)}))},cash_delivery:function(){var t=this;eventBus.$emit("progressEvent"),this.account.total=parseInt(this.getSubTotal)-parseInt(this.getCouponT),axios.post("cash_delivery",this.account).then((function(t){eventBus.$emit("StoprogEvent"),eventBus.$emit("cartEvent",t.data),eventBus.$emit("alertRequest","Order placed")})).catch((function(e){eventBus.$emit("StoprogEvent"),t.loading=!1,t.errors=e.response.data.errors}))},goToCheckout:function(){this.$router.push({name:"thankyou"})},get_cart_total:function(){this.$store.dispatch("getItems",{model:"cart_total",update_list:"updateCartTotalList"})},flashCart:function(t){var e=this;console.log(t),eventBus.$emit("progressEvent"),axios.post("/flashCart",t).then((function(t){eventBus.$emit("StoprogEvent"),eventBus.$emit("cartEvent",t.data),eventBus.$emit("alertRequest","Item Removed"),e.carts=t.data})).catch((function(t){eventBus.$emit("StoprogEvent"),e.loading=!1,e.errors=t.response.data.errors}))},subtructCart:function(t){t.order_qty=-1,eventBus.$emit("subCartEvent",t)},addToCart:function(t){t.order_qty=1,eventBus.$emit("subCartEvent",t)},couponApply:function(){var t=this;axios.post("/couponApply",this.coupon).then((function(e){if(console.log(e.data.errors),e.data.errors)return t.err_ms=e.data.errors;eventBus.$emit("StoprogEvent"),eventBus.$emit("cartEvent",e.data),eventBus.$emit("alertRequest","Coupon Applied"),t.getCouponSess(),t.getCart(),t.err_ms=""})).catch((function(e){console.log(e),eventBus.$emit("StoprogEvent"),t.errors=e.response.data.errors}))},getCartProduct:function(){var t=this;eventBus.$emit("progressEvent"),axios.get("/getCart").then((function(e){console.log(e.data),eventBus.$emit("StoprogEvent"),t.CartProduct=e.data})).catch((function(e){eventBus.$emit("StoprogEvent"),t.errors=e.response.data.errors}))},getCouponSess:function(){var t=this;eventBus.$emit("progressEvent"),axios.get("/couponSes").then((function(e){eventBus.$emit("StoprogEvent"),t.couponSessin=e.data})).catch((function(e){eventBus.$emit("StoprogEvent"),t.errors=e.response.data.errors}))}},mounted:function(){this.loader=!0,this.getCouponSess(),this.get_cart_total(),this.getCart()},created:function(){var t=this;eventBus.$on("cartEvent",(function(e){t.carts=e,t.cartAdd=!0})),eventBus.$on("paypalEvent",(function(e){t.$refs.paypal.submit()}))},computed:{getSubTotal:function(){if(this.carts.length>0){this.totalPrice=0;for(var t=0;t<this.carts.length;t++){var e=this.carts[t];this.totalPrice=parseInt(e.price)+this.totalPrice}}return this.totalPrice},carts:function(){return this.$store.getters.carts},cart_total:function(){return this.$store.getters.cart_total},getTotal:function(){if(this.carts.length>0)return parseInt(this.getSubTotal)-this.discount},getCouponT:function(){if(this.couponSessin.length>0){this.totalCoupon=0;for(var t=0;t<this.couponSessin.length;t++){var e=this.couponSessin[t];"percentage"===e.disc_type?(this.totalCoupon+=this.getSubTotal*e.amount/100,console.log(this.totalCoupon)):"fixedCart"===e.disc_type?(this.totalCoupon=this.totalCoupon+e.amount,console.log("this.totalCoupon")):this.totalCoupon=parseInt(e.amount)+this.totalCoupon}return this.totalCoupon}return this.totalCoupon}}},c={props:["account"],components:{myCart:Object(o.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"cart bgwhite p-t-70 p-b-100"},[s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:t.getCartProduct},slot:"activator"},[s("v-icon",{attrs:{small:"",color:"orange darken-2"}},[t._v("refresh")])],1),t._v(" "),s("span",[t._v("Cart")])],1),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"container-table-cart pos-relative"},[s("div",{staticClass:"wrap-table-shopping-cart bgwhite"},[s("table",{staticClass:"table-shopping-cart"},[t._m(0),t._v(" "),t._l(t.carts,(function(e){return s("tr",{key:e.id,staticClass:"table-row"},[s("td",{staticClass:"column-1"},[s("div",{staticClass:"cart-img-product b-rad-4 o-f-hidden",on:{click:function(s){return t.flashCart(e)}}},[s("img",{attrs:{src:e.product.image,alt:""}})])]),t._v(" "),s("td",{staticClass:"column-2"},[t._v(t._s(e.name.product_name))]),t._v(" "),s("td",{staticClass:"column-3"},[t._v(t._s(e.price))]),t._v(" "),s("td",{staticClass:"column-4"},[s("div",{staticClass:"flex-w bo5 of-hidden w-size17"},[s("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){return t.subtructCart(t.car,-1)}}},[s("i",{staticClass:"fa fa-minus"})]),t._v(" "),s("p",{staticStyle:{"text-align":"center",margin:"auto"}},[t._v(t._s(e.quantity))]),t._v(" "),s("v-btn",{attrs:{icon:"",small:""},on:{click:function(s){return t.addToCart(e,1)}}},[s("v-icon",[t._v("add")])],1)],1)]),t._v(" "),s("td",{staticClass:"column-5"},[t._v(t._s(e.subtotal))])])}))],2)])]),t._v(" "),s("div",{staticClass:"flex-w flex-sb-m p-t-25 p-b-25 bo8 p-l-35 p-r-60 p-lr-15-sm"},[s("div",{staticClass:"flex-w flex-m w-full-sm"},[s("div",{staticClass:"size11 bo4 m-r-10"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon.c_value,expression:"coupon.c_value"}],staticClass:"sizefull s-text7 p-l-22 p-r-22",attrs:{type:"text",name:"coupon-code",placeholder:"Coupon Code"},domProps:{value:t.coupon.c_value},on:{input:function(e){e.target.composing||t.$set(t.coupon,"c_value",e.target.value)}}}),t._v(" "),t.err_ms?s("small",{staticClass:"text-danger"},[t._v(t._s(t.err_ms))]):t._e()]),t._v(" "),s("div",{staticClass:"size12 trans-0-4 m-t-10 m-b-10 m-r-10"},[s("button",{staticClass:"flex-c-m sizefull bg1 bo-rad-23 hov1 s-text1 trans-0-4",on:{click:t.couponApply}},[t._v("Apply coupon")])])])]),t._v(" "),s("div",{staticClass:"bo9 w-size18 p-l-40 p-r-40 p-t-30 p-b-38 m-t-30 m-r-0 m-l-auto p-lr-15-sm"},[s("h5",{staticClass:"m-text20 p-b-24"},[t._v("Cart Totals")]),t._v(" "),s("div",{staticClass:"flex-w flex-sb-m p-b-12"},[s("span",{staticClass:"s-text18 w-size19 w-full-sm"},[t._v("Subtotal:")]),t._v(" "),s("span",{staticClass:"m-text21 w-size20 w-full-sm"},[t._v("KSH "+t._s(t.cart_total))])]),t._v(" "),t.couponSessin.length>0?s("div",{staticClass:"flex-w flex-sb-m p-b-12"},[s("span",{staticClass:"s-text18 w-size19 w-full-sm",staticStyle:{color:"red"}},[t._v("Coupon:")]),t._v(" "),s("span",{staticClass:"m-text21 w-size20 w-full-sm",staticStyle:{color:"red"}},[t._v(t._s(t.getCouponT/t.getSubTotal*100)+"% off")])]):t._e(),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"flex-w flex-sb-m p-t-26 p-b-30"},[s("span",{staticClass:"m-text22 w-size19 w-full-sm"},[t._v("Total:")]),t._v(" "),s("span",{staticClass:"m-text21 w-size20 w-full-sm"},[t._v("KSH "+t._s(parseFloat(t.cart_total)-parseFloat(t.totalCoupon)))])]),t._v(" "),s("div",{staticClass:"size15 trans-0-4"},["Paypal"===t.account.payment?s("form",{ref:"paypal",attrs:{action:"/createpayment",method:"post"}},[s("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf}}),t._v(" "),s("button",{staticClass:"flex-c-m sizefull bg1 bo-rad-23 hov1 s-text1 trans-0-4",staticStyle:{height:"44px"},attrs:{type:"submit"}},[t._v("Place Order")])]):(t.account.payment,s("v-btn",{attrs:{flat:"",color:"primary"},on:{click:t.cash_delivery}},[t._v("Place Order")]))],1)])])],1)])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"table-head"},[s("th",{staticClass:"column-1"}),t._v(" "),s("th",{staticClass:"column-2"},[t._v("Product")]),t._v(" "),s("th",{staticClass:"column-3"},[t._v("Price")]),t._v(" "),s("th",{staticClass:"column-4 p-l-70"},[t._v("Quantity")]),t._v(" "),s("th",{staticClass:"column-5"},[t._v("Total")])])}],!1,null,null,null).exports}},u={props:["user"],components:{myAddress:r,myComplete:Object(o.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",[t._v("Order Summary")]),t._v(" "),s("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{sm5:"","offset-sm1":""}},[s("h3",[t._v("Billing Address")]),t._v("\n                "+t._s(t.account.name)+" "),s("br"),t._v(" "),s("address",[t._v(t._s(t.account.name))]),t._v("\n                "+t._s(t.account.country)+" "),s("br"),t._v("\n                "+t._s(t.account.city)+" "),s("br"),t._v("\n                "+t._s(t.account.phone)+" "),s("br")]),t._v(" "),s("v-flex",{attrs:{sm5:"","offset-sm1":""}},[s("h3",[t._v("Billing Address")]),t._v("\n                "+t._s(t.account.name)+" "),s("br"),t._v(" "),s("address",[t._v(t._s(t.account.name))]),t._v("\n                "+t._s(t.account.country)+" "),s("br"),t._v("\n                "+t._s(t.account.city)+" "),s("br"),t._v("\n                "+t._s(t.account.phone)+" "),s("br")])],1),t._v(" "),s("myCart",{attrs:{account:t.account,checkout:t.checkout}})],1)],1)}),[],!1,null,null,null).exports,myPayment:l},data:function(){return{account:[],e6:1,errors:{},form:{}}},methods:{goToStep2:function(){this.user?this.account=this.user:this.account=this.form,this.account!={}?this.e6=2:eventBus.$emit("errorEvent","Please confirm if all fields  with * are filled")},goToStep3:function(){this.account.payment?this.e6=3:eventBus.$emit("errorEvent","Please confirm if all fields  with * are filled")},finish:function(){if("Paypal"!=this.account.payment){this.loading=!0,this.productD.order_qty=this.form.quantity;var t={model:"cartAdd",id:this.productD.id,data:this.productD};this.$store.dispatch("postItem",t)}else eventBus.$emit("paypalEvent",this.account)},cancel:function(){window.location.replace("/")},showerror:function(t){this.message=t,this.Scolor="red",this.snackbar=!0}},created:function(){var t=this;eventBus.$on("userResponse",(function(t){window.location.replace("/thankyou")})),eventBus.$on("companyResponse",(function(e){t.e6=2,t.company_id=e})),eventBus.$on("errorEvent",(function(e){t.showerror(e)}))}},v=Object(o.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.user?s("VCard",{staticStyle:{padding:"20px",width:"80%",margin:"auto","box-shadow":"7px 7px 8px -4px rgb(210, 225, 246),0 12px 17px 2px rgb(210, 225, 246),0 5px 22px 4px rgb(210, 225, 246) !important"}},[s("v-stepper",{attrs:{vertical:""},model:{value:t.e6,callback:function(e){t.e6=e},expression:"e6"}},[s("v-stepper-step",{attrs:{complete:t.e6>1,step:"1"}},[t._v("User information")]),t._v(" "),s("v-stepper-content",{staticStyle:{background:"#fff"},attrs:{step:"1"}},[s("v-card",{staticClass:"mb-5",attrs:{color:"white lighten-1"}},[s("myAddress",{attrs:{user:t.user,form:t.form}})],1),t._v(" "),s("v-btn",{attrs:{color:"primary"},on:{click:t.goToStep2}},[t._v("Continue")])],1),t._v(" "),s("v-stepper-step",{attrs:{complete:t.e6>2,step:"2"}},[t._v("Payment")]),t._v(" "),s("v-stepper-content",{staticStyle:{background:"#fff"},attrs:{step:"2"}},[s("v-card",{staticClass:"mb-5",attrs:{color:"white lighten-1"}},[s("myPayment",{attrs:{account:t.account}})],1),t._v(" "),s("v-btn",{attrs:{color:"primary"},on:{click:t.goToStep3}},[t._v("Continue")]),t._v(" "),s("v-btn",{attrs:{flat:""},on:{click:function(e){t.e6=1}}},[t._v("Back")])],1),t._v(" "),s("v-stepper-step",{attrs:{complete:t.e6>3,step:"3"}},[t._v("Complete")]),t._v(" "),s("v-stepper-content",{staticStyle:{background:"#fff"},attrs:{step:"3"}},[s("v-card",{staticClass:"mb-5",attrs:{color:"white lighten-1"}},[s("myComplete",{attrs:{account:t.account}})],1),t._v(" "),s("v-btn",{attrs:{flat:""},on:{click:function(e){t.e6=2}}},[t._v("Back")])],1)],1)],1):s("div",{staticStyle:{padding:"20px 0"}},[s("VCard",{staticClass:"text-center",staticStyle:{padding:"20px",width:"80%",margin:"auto","box-shadow":"7px 7px 8px -4px rgb(210, 225, 246),0 12px 17px 2px rgb(210, 225, 246),0 5px 22px 4px rgb(210, 225, 246) !important"}},[s("VCardText",[t._v("\n                You are not loged in! Please login to proceed.\n            ")]),t._v(" "),s("v-card-actions",{staticStyle:{width:"15%",margin:"auto"}},[s("v-btn",{attrs:{text:"",href:"/login",color:"primary"}},[t._v("Login")]),t._v(" "),s("v-btn",{attrs:{text:"",href:"/register",color:"primary"}},[t._v("Sign up")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=v.exports}}]);